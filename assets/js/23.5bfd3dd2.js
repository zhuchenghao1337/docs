(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{293:function(n,a,e){"use strict";e.r(a);var t=e(13),r=Object(t.a)({},(function(){var n=this,a=n._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[n._v("#")]),n._v(" 目录")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#1-------"}},[n._v("1.简介和版本选择")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#2nacos----"}},[n._v("2.Nacos注册中心")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#21----"}},[n._v("2.1快速开始")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#211nacos-server------"}},[n._v("2.1.1Nacos server的安装和启动")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#212nacos----"}},[n._v("2.1.2nacos注册中心")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#213----"}},[n._v("2.1.3创建服务")])])])]),n._v(" "),a("li",[a("a",{attrs:{href:"#22----"}},[n._v("2.2服务发现")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#23--openfeign-gateway"}},[n._v("2.3集成openFeign和gateway")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#1openfeign"}},[n._v("1.openFeign")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#2gateway"}},[n._v("2.gateway")])])])]),n._v(" "),a("li",[a("a",{attrs:{href:"#24-----------"}},[n._v("2.4对外暴露端口 健康监测")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#25---------"}},[n._v("2.5注册中心常用配置项")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#26nacos--"}},[n._v("2.6nacos集群")])])])]),n._v(" "),a("li",[a("a",{attrs:{href:"#3nacos----"}},[n._v("3.Nacos配置中心")]),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#31----"}},[n._v("3.1快速入门")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#32----"}},[n._v("3.2配置回滚")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#33------"}},[n._v("3.3配置读取规则")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#34--------"}},[n._v("3.4读取多个配置文件")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#35--------"}},[n._v("3.5公共配置文件管理")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#36----"}},[n._v("3.6常用配置")])]),n._v(" "),a("li",[a("a",{attrs:{href:"#37--"}},[n._v("3.7总结")])])])])]),n._v(" "),a("p",[a("small",[a("i",[a("a",{attrs:{href:"http://ecotrust-canada.github.io/markdown-toc/"}},[n._v("Table of contents generated with markdown-toc")])])])]),n._v(" "),a("h1",{attrs:{id:"_1-简介和版本选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介和版本选择"}},[n._v("#")]),n._v(" 1.简介和版本选择")]),n._v(" "),a("p",[n._v("Spring Cloud Alibaba 提供微服务开发的一站式解决方案。依托 Spring Cloud Alibaba，只需要添加一些注解和少量配置，就可以将 Spring Cloud 应用接入阿里微服务解决方案，通过阿里中间件来迅速搭建分布式应用系统。")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20221231223504.png",alt:""}})]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20221231224507.png",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<version>2.3.12.RELEASE</version>\n<spring-cloud-alibaba.version>2.2.7.RELEASE</spring-cloud-alibaba.version>\n<spring-cloud.version>Hoxton.SR12</spring-cloud.version>\n")])])]),a("h1",{attrs:{id:"_2-nacos注册中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-nacos注册中心"}},[n._v("#")]),n._v(" 2.Nacos注册中心")]),n._v(" "),a("h2",{attrs:{id:"_2-1快速开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1快速开始"}},[n._v("#")]),n._v(" 2.1快速开始")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20221231224845.png",alt:""}})]),n._v(" "),a("p",[n._v("选择2.0.3版本")]),n._v(" "),a("h3",{attrs:{id:"_2-1-1nacos-server的安装和启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1nacos-server的安装和启动"}},[n._v("#")]),n._v(" 2.1.1Nacos server的安装和启动")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("下载\nhttps://github.com/alibaba/nacos/releases/tag/2.0.3\n启动\nD:\\software\\Development\\nacos-server-2.0.3\\nacos\n1.mysql建库\nnacos\n建表  nacos-mysql.sql\n")])])]),a("p",[n._v("2.改配置文件 application.properties")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20221231230434.png",alt:""}})]),n._v(" "),a("p",[n._v("3.启动单机版")]),n._v(" "),a("p",[n._v("cmd:  startup.cmd -m standalone\\")]),n._v(" "),a("p",[n._v("4.查看")]),n._v(" "),a("p",[n._v("http://localhost:8848/nacos/#/login")]),n._v(" "),a("p",[n._v("帐号密码 nacos nacos")]),n._v(" "),a("h3",{attrs:{id:"_2-1-2nacos注册中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2nacos注册中心"}},[n._v("#")]),n._v(" 2.1.2nacos注册中心")]),n._v(" "),a("p",[n._v("nacos和eureka区别")]),n._v(" "),a("p",[n._v("nacos默认有登录；nacos有一个命名空间，起隔离作用，不同项目下的服务可以重名；nacos还可以分组；")]),n._v(" "),a("h3",{attrs:{id:"_2-1-3创建服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3创建服务"}},[n._v("#")]),n._v(" 2.1.3创建服务")]),n._v(" "),a("p",[n._v("1.依赖")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("springboot\n<version>2.3.12.RELEASE</version>\n\nnacos\n<spring-cloud-alibaba.version>2.2.7.RELEASE</spring-cloud-alibaba.version>\n")])])]),a("p",[n._v("2.yml配置文件")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server:\n  port: 8081\nspring:\n  application:\n    name: nacos-client-b\n  cloud:\n    nacos:\n      server-addr: localhost:8848 # 注册地址\n      username: nacos\n      password: nacos\n      discovery: # 和注册相关的配置\n        namespace: eed441f5-6a24-4ec1-b489-03c577c1f2a9 # 命名空间\n        group: A_GROUP # 组\n        service: user-service # 注册列表的名字\n")])])]),a("p",[n._v("3.启动类")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("@SpringBootApplication\n@EnableDiscoveryClient # 开启\npublic class NacosClientBApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(NacosClientBApplication.class, args);\n    }\n\n}\n")])])]),a("h2",{attrs:{id:"_2-2服务发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2服务发现"}},[n._v("#")]),n._v(" 2.2服务发现")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@RestController\npublic class TestController {\n\n    @Autowired\n    private DiscoveryClient discoveryClient;\n\n    @GetMapping("/a")\n    public String a(){\n        List<ServiceInstance> instances = discoveryClient.getInstances("user-service");\n        System.out.println(instances);\n        return "ok";\n    }\n    \n}\n')])])]),a("h2",{attrs:{id:"_2-3集成openfeign和gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3集成openfeign和gateway"}},[n._v("#")]),n._v(" 2.3集成openFeign和gateway")]),n._v(" "),a("h3",{attrs:{id:"_1-openfeign"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-openfeign"}},[n._v("#")]),n._v(" 1.openFeign")]),n._v(" "),a("p",[n._v("pom 注意拌版本和依赖管理")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.3.12.RELEASE</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    <groupId>xyz.zch1337</groupId>\n    <artifactId>nacos-client-a</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <name>01-nacos-client-a</name>\n    <description>01-nacos-client-a</description>\n\n    <properties>\n        <java.version>1.8</java.version>\n        <spring-cloud-alibaba.version>2.2.7.RELEASE</spring-cloud-alibaba.version>\n        <spring-cloud.version>Hoxton.SR12</spring-cloud.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.cloud</groupId>\n            <artifactId>spring-cloud-starter-openfeign</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n            <exclusions>\n                <exclusion>\n                    <groupId>org.junit.vintage</groupId>\n                    <artifactId>junit-vintage-engine</artifactId>\n                </exclusion>\n            </exclusions>\n        </dependency>\n    </dependencies>\n\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>com.alibaba.cloud</groupId>\n                <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n                <version>${spring-cloud-alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n</project>\n')])])]),a("p",[n._v("接口")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@FeignClient(value = "car-service")\npublic interface TestFeign {\n    @GetMapping("/info")\n    public String info();\n}\n')])])]),a("p",[n._v("调用")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    @Autowired\n    private TestFeign testFeign;\n\n    @GetMapping("/a")\n    public String a(){\n        List<ServiceInstance> instances = discoveryClient.getInstances("user-service");\n        System.out.println(instances);\n        return testFeign.info();\n    }\n')])])]),a("h3",{attrs:{id:"_2-gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-gateway"}},[n._v("#")]),n._v(" 2.gateway")]),n._v(" "),a("p",[n._v("依赖")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.3.12.RELEASE</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    <groupId>xyz.zch1337</groupId>\n    <artifactId>gateway</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <name>03-gateway</name>\n    <description>03-gateway</description>\n\n    <properties>\n        <java.version>1.8</java.version>\n        <spring-cloud-alibaba.version>2.2.7.RELEASE</spring-cloud-alibaba.version>\n        <spring-cloud.version>Hoxton.SR12</spring-cloud.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.cloud</groupId>\n            <artifactId>spring-cloud-starter-gateway</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>com.alibaba.cloud</groupId>\n                <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n                <version>${spring-cloud-alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.8.1</version>\n                <configuration>\n                    <source>1.8</source>\n                    <target>1.8</target>\n                    <encoding>UTF-8</encoding>\n                </configuration>\n            </plugin>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n')])])]),a("p",[n._v("yml配置文件")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server:\n  port: 80\nspring:\n  application:\n    name: gateway\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n      username: nacos\n      password: nacos\n      discovery: # 和注册相关的配置\n        namespace: eed441f5-6a24-4ec1-b489-03c577c1f2a9\n        group: A_GROUP\n    gateway:\n      discovery:\n        locator:\n          enabled: true # 开启动态路由\n          lower-case-service-id: true\n\n")])])]),a("p",[n._v("启动类 开启动态路由")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("@SpringBootApplication\n@EnableDiscoveryClient\npublic class GatewayApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(GatewayApplication.class, args);\n    }\n\n}\n")])])]),a("h2",{attrs:{id:"_2-4对外暴露端口-健康监测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4对外暴露端口-健康监测"}},[n._v("#")]),n._v(" 2.4对外暴露端口 健康监测")]),n._v(" "),a("p",[n._v("1.给任意项目添加依赖")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n\t<groupId>org.springframework.boot</groupId>\n\t<artifactId>spring-boot-starter-actuator</artifactId>\n</dependency>\n")])])]),a("p",[n._v("2.修改配置文件")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("management:\n  endpoints:\n    web:\n      exposure:\n        include: '*'\n")])])]),a("p",[n._v("3.查看")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("http://localhost/user-service/actuator\nhttp://localhost/user-service/actuator/nacosdiscovery\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101135206.png",alt:""}})]),n._v(" "),a("h2",{attrs:{id:"_2-5注册中心常用配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5注册中心常用配置项"}},[n._v("#")]),n._v(" 2.5注册中心常用配置项")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101135425.png",alt:""}})]),n._v(" "),a("h2",{attrs:{id:"_2-6nacos集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6nacos集群"}},[n._v("#")]),n._v(" 2.6nacos集群")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("https://www.bilibili.com/video/BV1f94y1U7AB?p=66&spm_id_from=pageDriver&vd_source=a55257dc4e553e9dc121804f0b680049\n")])])]),a("h1",{attrs:{id:"_3-nacos配置中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-nacos配置中心"}},[n._v("#")]),n._v(" 3.Nacos配置中心")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101150528.png",alt:""}})]),n._v(" "),a("h2",{attrs:{id:"_3-1快速入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1快速入门"}},[n._v("#")]),n._v(" 3.1快速入门")]),n._v(" "),a("p",[n._v("配置文件中心")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101152126.png",alt:""}})]),n._v(" "),a("p",[n._v("依赖")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.3.12.RELEASE</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    <groupId>xyz.zch1337</groupId>\n    <artifactId>nacos-config-a</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <name>04-nacos-config-a</name>\n    <description>04-nacos-config-a</description>\n\n    <properties>\n        <java.version>1.8</java.version>\n        <spring-cloud-alibaba.version>2.2.7.RELEASE</spring-cloud-alibaba.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>com.alibaba.cloud</groupId>\n                <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n                <version>${spring-cloud-alibaba.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n\n</project>\n\n')])])]),a("p",[n._v("bootstrap.yml")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server:\n  port: 8081\nspring:\n  application:\n    name: nacos-config-a\n  cloud:\n    nacos:\n      config:\n        username: nacos\n        password: nacos\n        prefix: nacos-config-a # 配置文件名\n        file-extension: yml # 文件类型\n        server-addr: localhost:8848\n")])])]),a("p",[n._v("测试接口")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@RestController\n@RefreshScope // 刷新作用域       一般放到config类上\npublic class TestController {\n    @Value("${hero.name}")\n    private String name;\n\n    @GetMapping("/info")\n    public String info(){\n        return name;\n    }\n}\n')])])]),a("p",[n._v("结果")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101152146.png",alt:""}})]),n._v(" "),a("p",[n._v("修改不用重启就成功!")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101152632.png",alt:""}})]),n._v(" "),a("h2",{attrs:{id:"_3-2配置回滚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2配置回滚"}},[n._v("#")]),n._v(" 3.2配置回滚")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101153353.png",alt:""}})]),n._v(" "),a("h2",{attrs:{id:"_3-3配置读取规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3配置读取规则"}},[n._v("#")]),n._v(" 3.3配置读取规则")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101154458.png",alt:""}})]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101154600.png",alt:""}})]),n._v(" "),a("p",[n._v("如果添加环境的话，需要这样写 要对应")]),n._v(" "),a("h2",{attrs:{id:"_3-4读取多个配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4读取多个配置文件"}},[n._v("#")]),n._v(" 3.4读取多个配置文件")]),n._v(" "),a("p",[n._v("!!!!!!!!!!!!!!!!!!!!!!!!侧重与读不同组别的文件!!!!!!!!!!!!!!!!!")]),n._v(" "),a("p",[n._v("同时读同一个命名空间的不同组")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101154908.png",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server:\n  port: 8082\nspring:\n  application:\n    name: nacos-config-test\n  cloud:\n    nacos:\n      config:\n        server-addr: localhost:8848\n        username: nacos\n        password: nacos\n        namespace: eed441f5-6a24-4ec1-b489-03c577c1f2a9 # 读多配置 只能在同一个命名空间下\n        file-extension: yml\n        extension-configs:  # 可以读多个配置文件 同一命名空间 可以不同组\n          - dataId: user-center-dev.yml\n            group: A_GROUP\n            refresh: true  # 开启动态刷新\n          - dataId: member-center-dev.yml\n            group: B_GROUP\n            refresh: true\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@Data\n@ArrayLenRange\n@NoArgsConstructor\n@Configuration\n@RefreshScope\npublic class User {\n    @Value("${hero.name}")\n    private String name;\n    @Value("${hero.age}")\n    private String age;\n}\n')])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@RestController\npublic class TestController {\n    @Autowired\n    private User user;\n    @GetMapping("/test")\n    public String test(){\n        return user.getAge() + " " + user.getName();\n    }\n}\n')])])]),a("h2",{attrs:{id:"_3-5公共配置文件管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5公共配置文件管理"}},[n._v("#")]),n._v(" 3.5公共配置文件管理")]),n._v(" "),a("p",[n._v("比如mysql的配置文件是共享的")]),n._v(" "),a("p",[n._v("前提：")]),n._v(" "),a("p",[n._v("同一个命名空间")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101163101.png",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server:\n  port: 8082\nspring:\n  application:\n    name: nacos-config-test\n  cloud:\n    nacos:\n      config:\n        server-addr: localhost:8848\n        username: nacos\n        password: nacos\n        namespace: eed441f5-6a24-4ec1-b489-03c577c1f2a9 # 读多配置 只能在同一个命名空间下\n        file-extension: yml\n        prefix: user-center\n        group: A_GROUP\n        shared-configs: # 共享配置文件\n          - application-dev.yml # # 这中写法 可以读其他组的共享文件\n  profiles:\n    active: dev\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server:\n  port: 8082\nspring:\n  application:\n    name: nacos-config-test\n  cloud:\n    nacos:\n      config:\n        server-addr: localhost:8848\n        username: nacos\n        password: nacos\n        namespace: eed441f5-6a24-4ec1-b489-03c577c1f2a9 # 读多配置 只能在同一个命名空间下\n        file-extension: yml\n        prefix: user-center\n        group: A_GROUP\n        shared-configs: # 共享配置文件\n#          - application-dev.yml # 这种写法 只能读默认的组\n          - dataId: application-dev.yml  # 这中写法 可以读其他组的共享文件\n            group: C_GROUP\n            refresh: true\n  profiles:\n    active: dev\n")])])]),a("h2",{attrs:{id:"_3-6常用配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6常用配置"}},[n._v("#")]),n._v(" 3.6常用配置")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230101164417.png",alt:""}})]),n._v(" "),a("h2",{attrs:{id:"_3-7总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7总结"}},[n._v("#")]),n._v(" 3.7总结")]),n._v(" "),a("table",[a("thead",[a("tr",[a("th",[n._v("bootstrap.yml")])])]),n._v(" "),a("tbody",[a("tr",[a("td",[n._v("应用名称：spring.application.name")])]),n._v(" "),a("tr",[a("td",[n._v("nacos的注册和拉取配置文件")])]),n._v(" "),a("tr",[a("td",[n._v("其他都放配置中心，包括端口号等")])])])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("spring:\n  application:\n    name: nacos-config-test\n  cloud:\n    nacos:\n      config:\n        server-addr: localhost:8848\n        username: nacos\n        password: nacos\n        namespace: eed441f5-6a24-4ec1-b489-03c577c1f2a9 # 读多配置 只能在同一个命名空间下\n        file-extension: yml\n        prefix: user-center\n        group: A_GROUP\n        shared-configs: # 共享配置文件\n          - dataId: application-dev.yml\n            group: C_GROUP\n            refresh: true\n        extension-configs:  # 可以读多个配置文件 同一命名空间 可以不同组\n          - dataId: user-center-dev.yml\n            group: A_GROUP\n            refresh: true  # 开启动态刷新\n          - dataId: member-center-dev.yml\n            group: B_GROUP\n            refresh: true\n  profiles:\n    active: dev\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);