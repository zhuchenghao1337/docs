<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.开发流程 | 慢下来~享受当下~</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/assets/img/favicon.ico">
    <meta name="description" content="">
    <meta name="keywords" content="网站关键词">
    <meta name="author" content="zch1337">
    
    <link rel="preload" href="/assets/css/0.styles.7b36eabc.css" as="style"><link rel="preload" href="/assets/js/app.dd397728.js" as="script"><link rel="preload" href="/assets/js/2.6430ac10.js" as="script"><link rel="preload" href="/assets/js/29.92dc21e8.js" as="script"><link rel="prefetch" href="/assets/js/10.de11ce4e.js"><link rel="prefetch" href="/assets/js/11.eb24f3d9.js"><link rel="prefetch" href="/assets/js/12.58efe507.js"><link rel="prefetch" href="/assets/js/13.3d3cb395.js"><link rel="prefetch" href="/assets/js/14.163292db.js"><link rel="prefetch" href="/assets/js/15.0eeb79e2.js"><link rel="prefetch" href="/assets/js/16.0fd3ccda.js"><link rel="prefetch" href="/assets/js/17.a13c3e02.js"><link rel="prefetch" href="/assets/js/18.e19d705d.js"><link rel="prefetch" href="/assets/js/19.52c11801.js"><link rel="prefetch" href="/assets/js/20.4cfdf5ad.js"><link rel="prefetch" href="/assets/js/21.b6ab34b9.js"><link rel="prefetch" href="/assets/js/22.d6b62e7e.js"><link rel="prefetch" href="/assets/js/23.5bfd3dd2.js"><link rel="prefetch" href="/assets/js/24.8f60b85b.js"><link rel="prefetch" href="/assets/js/25.23e92ce8.js"><link rel="prefetch" href="/assets/js/26.079d4c49.js"><link rel="prefetch" href="/assets/js/27.2a42a3bc.js"><link rel="prefetch" href="/assets/js/28.96e30dd4.js"><link rel="prefetch" href="/assets/js/3.7ceae309.js"><link rel="prefetch" href="/assets/js/30.a44ddd87.js"><link rel="prefetch" href="/assets/js/31.ebffffad.js"><link rel="prefetch" href="/assets/js/32.cbeff704.js"><link rel="prefetch" href="/assets/js/33.f34223b0.js"><link rel="prefetch" href="/assets/js/4.3357b40a.js"><link rel="prefetch" href="/assets/js/5.1d0c2d3a.js"><link rel="prefetch" href="/assets/js/6.aeb7dc84.js"><link rel="prefetch" href="/assets/js/7.f2b24add.js"><link rel="prefetch" href="/assets/js/8.b624c3e8.js"><link rel="prefetch" href="/assets/js/9.4891ca45.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b36eabc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/hero.png" alt="慢下来~享受当下~" class="logo"> <span class="site-name can-hide">慢下来~享受当下~</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="英语" class="dropdown-title"><span class="title">英语</span> <span class="arrow down"></span></button> <button type="button" aria-label="英语" class="mobile-dropdown-title"><span class="title">英语</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yingyu/fangfa.html" class="nav-link">
  方法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/sanjianke.html" class="nav-link">
  三剑客
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/vue.html" class="nav-link">
  vue全家桶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          第一阶段-基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/javase.html" class="nav-link">
  javase
</a></li><li class="dropdown-subitem"><a href="/houduan/mysql.html" class="nav-link">
  mysql
</a></li><li class="dropdown-subitem"><a href="/houduan/jdbc.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/houduan/servlet.html" class="nav-link">
  servlet
</a></li></ul></li><li class="dropdown-item"><h4>
          第二阶段-框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/maven.html" class="nav-link">
  maven
</a></li><li class="dropdown-subitem"><a href="/houduan/spring.html" class="nav-link">
  spring
</a></li><li class="dropdown-subitem"><a href="/houduan/springMVC.html" class="nav-link">
  springMVC
</a></li><li class="dropdown-subitem"><a href="/houduan/mybatis+PLUS.html" class="nav-link">
  mybatis+PLUS
</a></li><li class="dropdown-subitem"><a href="/houduan/springboot.html" class="nav-link">
  springboot
</a></li><li class="dropdown-subitem"><a href="/houduan/redis.html" class="nav-link">
  redis
</a></li><li class="dropdown-subitem"><a href="/houduan/springsecurity.html" class="nav-link">
  springsecurity
</a></li></ul></li><li class="dropdown-item"><h4>
          第三阶段-微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/springcloud.html" class="nav-link">
  springcloud
</a></li><li class="dropdown-subitem"><a href="/houduan/springcloudAlibaba.html" class="nav-link">
  springcloudAlibaba
</a></li><li class="dropdown-subitem"><a href="/houduan/rabbitMQ.html" class="nav-link">
  rabbitMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/linux.html" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/docker.html" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高效工具" class="dropdown-title"><span class="title">高效工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="高效工具" class="mobile-dropdown-title"><span class="title">高效工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gaoxiao/vim.html" class="nav-link">
  vim
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目总结" class="dropdown-title"><span class="title">项目总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目总结" class="mobile-dropdown-title"><span class="title">项目总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prosummary/vueS.html" class="nav-link">
  vue项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/javaS.html" class="nav-link">
  java项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/前后端项目开发流程.html" class="nav-link">
  前后端项目搭建
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/后端知识总结.html" class="nav-link">
  后端开发流程
</a></li></ul></div></div><div class="nav-item"><a href="http://www.zch1337.xyz/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于我
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="英语" class="dropdown-title"><span class="title">英语</span> <span class="arrow down"></span></button> <button type="button" aria-label="英语" class="mobile-dropdown-title"><span class="title">英语</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yingyu/fangfa.html" class="nav-link">
  方法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/sanjianke.html" class="nav-link">
  三剑客
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/vue.html" class="nav-link">
  vue全家桶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          第一阶段-基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/javase.html" class="nav-link">
  javase
</a></li><li class="dropdown-subitem"><a href="/houduan/mysql.html" class="nav-link">
  mysql
</a></li><li class="dropdown-subitem"><a href="/houduan/jdbc.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/houduan/servlet.html" class="nav-link">
  servlet
</a></li></ul></li><li class="dropdown-item"><h4>
          第二阶段-框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/maven.html" class="nav-link">
  maven
</a></li><li class="dropdown-subitem"><a href="/houduan/spring.html" class="nav-link">
  spring
</a></li><li class="dropdown-subitem"><a href="/houduan/springMVC.html" class="nav-link">
  springMVC
</a></li><li class="dropdown-subitem"><a href="/houduan/mybatis+PLUS.html" class="nav-link">
  mybatis+PLUS
</a></li><li class="dropdown-subitem"><a href="/houduan/springboot.html" class="nav-link">
  springboot
</a></li><li class="dropdown-subitem"><a href="/houduan/redis.html" class="nav-link">
  redis
</a></li><li class="dropdown-subitem"><a href="/houduan/springsecurity.html" class="nav-link">
  springsecurity
</a></li></ul></li><li class="dropdown-item"><h4>
          第三阶段-微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/springcloud.html" class="nav-link">
  springcloud
</a></li><li class="dropdown-subitem"><a href="/houduan/springcloudAlibaba.html" class="nav-link">
  springcloudAlibaba
</a></li><li class="dropdown-subitem"><a href="/houduan/rabbitMQ.html" class="nav-link">
  rabbitMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/linux.html" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/docker.html" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高效工具" class="dropdown-title"><span class="title">高效工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="高效工具" class="mobile-dropdown-title"><span class="title">高效工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gaoxiao/vim.html" class="nav-link">
  vim
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目总结" class="dropdown-title"><span class="title">项目总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目总结" class="mobile-dropdown-title"><span class="title">项目总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prosummary/vueS.html" class="nav-link">
  vue项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/javaS.html" class="nav-link">
  java项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/前后端项目开发流程.html" class="nav-link">
  前后端项目搭建
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/后端知识总结.html" class="nav-link">
  后端开发流程
</a></li></ul></div></div><div class="nav-item"><a href="http://www.zch1337.xyz/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于我
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>1.开发流程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_1-开发流程" class="sidebar-link">1.开发流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_1-controller" class="sidebar-link">1.controller</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-service" class="sidebar-link">2.service</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_3-mapper" class="sidebar-link">3.mapper</a></li></ul></li><li><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-常用的工具类" class="sidebar-link">2.常用的工具类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-1mybatisplus分页" class="sidebar-link">2.1mybatisPlus分页</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-2redisconfig" class="sidebar-link">2.2RedisConfig</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-3webconfig" class="sidebar-link">2.3WebConfig</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-4字面量封装" class="sidebar-link">2.4字面量封装</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-5统一结果返回类" class="sidebar-link">2.5统一结果返回类</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-6httpcode状态码" class="sidebar-link">2.6HttpCode状态码</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-7自定义全局异常" class="sidebar-link">2.7自定义全局异常</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-8mybatis自动插入" class="sidebar-link">2.8mybatis自动插入</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-9bean拷贝" class="sidebar-link">2.9Bean拷贝</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-10redisjson序列化" class="sidebar-link">2.10RedisJSON序列化</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-11文件路径生成" class="sidebar-link">2.11文件路径生成</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-12securityutils" class="sidebar-link">2.12SecurityUtils</a></li><li class="sidebar-sub-header"><a href="/prosummary/%E5%90%8E%E7%AB%AF%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html#_2-13webutils" class="sidebar-link">2.13WebUtils</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-开发流程"><a href="#_1-开发流程" class="header-anchor">#</a> 1.开发流程</h2> <h3 id="_1-controller"><a href="#_1-controller" class="header-anchor">#</a> 1.controller</h3> <div class="language- extra-class"><pre class="language-text"><code>1.什么请求用什么注解去接收
2.是否使用dto类来接收数据
3.调用service去实现业务逻辑
</code></pre></div><p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227092335.png" alt=""></p> <h3 id="_2-service"><a href="#_2-service" class="header-anchor">#</a> 2.service</h3> <div class="language- extra-class"><pre class="language-text"><code>1.参数校验，避免非法操作
	参数非空验证，username不能重复，手机邮箱是否唯一、密码是否加密等
2.注意业务逻辑，进行数据修改
	是否用到了其他的service、是否开启事务等
	新增用户时同时也要分配权限等
3.整理数据，返回响应
	是否使用vo类等
4.过程中
	使用字面量封装常量、抛出自定义的全局异常、使用stream流来整理数据
</code></pre></div><p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227094713.png" alt=""></p> <p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227094946.png" alt=""></p> <p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227095133.png" alt=""></p> <p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227095404.png" alt=""></p> <p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227095516.png" alt=""></p> <h3 id="_3-mapper"><a href="#_3-mapper" class="header-anchor">#</a> 3.mapper</h3> <div class="language- extra-class"><pre class="language-text"><code>实现一些mybatis不好实现的业务
</code></pre></div><p><img src="https://raw.githubusercontent.com/zhuchenghao1337/github-images/main/2022/20230227095926.png" alt=""></p> <h2 id="_2-常用的工具类"><a href="#_2-常用的工具类" class="header-anchor">#</a> 2.常用的工具类</h2> <h3 id="_2-1mybatisplus分页"><a href="#_2-1mybatisplus分页" class="header-anchor">#</a> 2.1mybatisPlus分页</h3> <div class="language- extra-class"><pre class="language-text"><code>import com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;
import com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class MbatisPlusConfig {

    /**
     * 3.4.0之后版本
     * mybatis 分页拦截器
     * @return
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor(){
        MybatisPlusInterceptor mybatisPlusInterceptor = new MybatisPlusInterceptor();
        mybatisPlusInterceptor.addInnerInterceptor(new PaginationInnerInterceptor());
        return mybatisPlusInterceptor;
    }
}
</code></pre></div><h3 id="_2-2redisconfig"><a href="#_2-2redisconfig" class="header-anchor">#</a> 2.2RedisConfig</h3> <div class="language- extra-class"><pre class="language-text"><code>import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.StringRedisSerializer;
import xyz.zch1337.utils.FastJsonRedisSerializer;

@Configuration
public class RedisConfig {

    @Bean
    @SuppressWarnings(value = { &quot;unchecked&quot;, &quot;rawtypes&quot; })
    public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory)
    {
        RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate&lt;&gt;();
        template.setConnectionFactory(connectionFactory);

        FastJsonRedisSerializer serializer = new FastJsonRedisSerializer(Object.class);

        // 使用StringRedisSerializer来序列化和反序列化redis的key值
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(serializer);

        // Hash的key也采用StringRedisSerializer的序列化方式
        template.setHashKeySerializer(new StringRedisSerializer());
        template.setHashValueSerializer(serializer);

        template.afterPropertiesSet();
        return template;
    }
}
</code></pre></div><h3 id="_2-3webconfig"><a href="#_2-3webconfig" class="header-anchor">#</a> 2.3WebConfig</h3> <p>跨域设置、日期转换器等</p> <div class="language- extra-class"><pre class="language-text"><code>import com.alibaba.fastjson.serializer.SerializeConfig;
import com.alibaba.fastjson.serializer.SerializerFeature;
import com.alibaba.fastjson.serializer.ToStringSerializer;
import com.alibaba.fastjson.support.config.FastJsonConfig;
import com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.converter.HttpMessageConverter;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import java.util.List;

@Configuration
public class WebConfig implements WebMvcConfigurer {
    // 开启跨域访问
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        // 设置允许跨域的路径
        registry.addMapping(&quot;/**&quot;)
                // 设置允许跨域请求的域名
                .allowedOriginPatterns(&quot;*&quot;)
                // 是否允许cookie
                .allowCredentials(true)
                // 设置允许的请求方式
                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PUT&quot;)
                // 设置允许的header属性
                .allowedHeaders(&quot;*&quot;)
                // 跨域允许时间
                .maxAge(3600);
    }

    // 配置转换器
    @Override
    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {
        converters.add(fastJsonHttpMessageConverters());
    }
    // 转换日期格式
    @Bean//使用@Bean注入fastJsonHttpMessageConvert
    public HttpMessageConverter fastJsonHttpMessageConverters() {
        //1.需要定义一个Convert转换消息的对象
        FastJsonHttpMessageConverter fastConverter = new FastJsonHttpMessageConverter();
        FastJsonConfig fastJsonConfig = new FastJsonConfig();
        fastJsonConfig.setSerializerFeatures(SerializerFeature.PrettyFormat);
        fastJsonConfig.setDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);

        SerializeConfig.globalInstance.put(Long.class, ToStringSerializer.instance);

        fastJsonConfig.setSerializeConfig(SerializeConfig.globalInstance);
        fastConverter.setFastJsonConfig(fastJsonConfig);
        HttpMessageConverter&lt;?&gt; converter = fastConverter;
        return converter;
    }

}
</code></pre></div><h3 id="_2-4字面量封装"><a href="#_2-4字面量封装" class="header-anchor">#</a> 2.4字面量封装</h3> <div class="language- extra-class"><pre class="language-text"><code>public class SystemConstants
{
    /**
     *  文章是草稿
     */
    public static final int ARTICLE_STATUS_DRAFT = 1;
    /**
     *  文章是正常发布状态
     */
    public static final int ARTICLE_STATUS_NORMAL = 0;

    public static final String STATUS_NORMAL = &quot;0&quot;;

    /**
     *  友链审核通过是正常状态
     */
    public static final String LINK_STATUS_NORMAL = &quot;0&quot;;
    /**
     * 评论类型
     */
    public static final String ARTICLE_COMMENT = &quot;0&quot;;
    public static final String LINK_COMMENT = &quot;1&quot;;

    /**
     *
     */
    public static final String MENU = &quot;C&quot;;
    public static final String BUTTON = &quot;F&quot;;
    /**
     * 1为后台用户
     */
    public static final String ADMIN = &quot;1&quot;;
}
</code></pre></div><h3 id="_2-5统一结果返回类"><a href="#_2-5统一结果返回类" class="header-anchor">#</a> 2.5统一结果返回类</h3> <div class="language- extra-class"><pre class="language-text"><code>import com.fasterxml.jackson.annotation.JsonInclude;
import xyz.zch1337.enums.AppHttpCodeEnum;

import java.io.Serializable;

@JsonInclude(JsonInclude.Include.NON_NULL)
public class R&lt;T&gt; implements Serializable {
    private Integer code;
    private String msg;
    private T data;

    public R() {
        this.code = AppHttpCodeEnum.SUCCESS.getCode();
        this.msg = AppHttpCodeEnum.SUCCESS.getMsg();
    }

    public R(Integer code, T data) {
        this.code = code;
        this.data = data;
    }

    public R(Integer code, String msg, T data) {
        this.code = code;
        this.msg = msg;
        this.data = data;
    }

    public R(Integer code, String msg) {
        this.code = code;
        this.msg = msg;
    }

    public static R errorResult(int code, String msg) {
        R result = new R();
        return result.error(code, msg);
    }
    public static R okResult() {
        R result = new R();
        return result;
    }
    public static R okResult(int code, String msg) {
        R result = new R();
        return result.ok(code, null, msg);
    }

    public static R okResult(Object data) {
        R result = setAppHttpCodeEnum(AppHttpCodeEnum.SUCCESS, AppHttpCodeEnum.SUCCESS.getMsg());
        if(data!=null) {
            result.setData(data);
        }
        return result;
    }

    public static R errorResult(AppHttpCodeEnum enums){
        return setAppHttpCodeEnum(enums,enums.getMsg());
    }

    public static R errorResult(AppHttpCodeEnum enums, String msg){
        return setAppHttpCodeEnum(enums,msg);
    }

    public static R setAppHttpCodeEnum(AppHttpCodeEnum enums){
        return okResult(enums.getCode(),enums.getMsg());
    }

    private static R setAppHttpCodeEnum(AppHttpCodeEnum enums, String msg){
        return okResult(enums.getCode(),msg);
    }

    public R&lt;?&gt; error(Integer code, String msg) {
        this.code = code;
        this.msg = msg;
        return this;
    }

    public R&lt;?&gt; ok(Integer code, T data) {
        this.code = code;
        this.data = data;
        return this;
    }

    public R&lt;?&gt; ok(Integer code, T data, String msg) {
        this.code = code;
        this.data = data;
        this.msg = msg;
        return this;
    }

    public R&lt;?&gt; ok(T data) {
        this.data = data;
        return this;
    }

    public Integer getCode() {
        return code;
    }

    public void setCode(Integer code) {
        this.code = code;
    }

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public T getData() {
        return data;
    }

    public void setData(T data) {
        this.data = data;
    }

}
</code></pre></div><h3 id="_2-6httpcode状态码"><a href="#_2-6httpcode状态码" class="header-anchor">#</a> 2.6HttpCode状态码</h3> <div class="language- extra-class"><pre class="language-text"><code>public enum AppHttpCodeEnum {
    // 成功
    SUCCESS(200,&quot;操作成功&quot;),
    // 登录
    NEED_LOGIN(401,&quot;需要登录后操作&quot;),
    NO_OPERATOR_AUTH(403,&quot;无权限操作&quot;),
    SYSTEM_ERROR(500,&quot;出现错误&quot;),
    USERNAME_EXIST(501,&quot;用户名已存在&quot;),
    PHONENUMBER_EXIST(502,&quot;手机号已存在&quot;), EMAIL_EXIST(503, &quot;邮箱已存在&quot;),
    REQUIRE_USERNAME(504, &quot;必需填写用户名&quot;),
    LOGIN_ERROR(505,&quot;用户名或密码错误&quot;),
    CONTENT_NOT_NULL(506, &quot;评论内容不能为空&quot;),
    FILE_TYPE_ERROR(507, &quot;文件类型错误,请上传png格式图片&quot;),
    USERNAME_NOT_NULL(508, &quot;用户名不能为空&quot;),
    PASSWORD_NOT_NULL(509,&quot;密码不能为空&quot;),
    NICKNAME_NOT_NULL(510,&quot;昵称不能为空&quot;),
    EMAIL_NOT_NULL(511,&quot;邮箱不能为空&quot;),
    NICKNAME_EXIST(512, &quot;昵称已经存在&quot;), PARENT_IS_ME(500, &quot;修改菜单失败，上级菜单不能选择自己&quot;), HAS_CHILD_MENU(500, &quot;存在子菜单不允许删除&quot;), NOT_DELETE_LOGINUSER(513, &quot;不能删除当前操作的用户&quot;),
    REMOVE_ROLE_ADMIN(513, &quot;超级管理员不能删除&quot;);
    int code;
    String msg;

    AppHttpCodeEnum(int code, String errorMessage){
        this.code = code;
        this.msg = errorMessage;
    }

    public int getCode() {
        return code;
    }

    public String getMsg() {
        return msg;
    }
}
</code></pre></div><h3 id="_2-7自定义全局异常"><a href="#_2-7自定义全局异常" class="header-anchor">#</a> 2.7自定义全局异常</h3> <div class="language- extra-class"><pre class="language-text"><code>import xyz.zch1337.enums.AppHttpCodeEnum;

public class SystemException extends RuntimeException{

    private int code;

    private String msg;

    public int getCode() {
        return code;
    }

    public String getMsg() {
        return msg;
    }

    public SystemException(AppHttpCodeEnum httpCodeEnum) {
        super(httpCodeEnum.getMsg());
        this.code = httpCodeEnum.getCode();
        this.msg = httpCodeEnum.getMsg();
    }

}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;
import xyz.zch1337.domain.R;
import xyz.zch1337.enums.AppHttpCodeEnum;
import xyz.zch1337.exception.SystemException;

@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {

    @ExceptionHandler(SystemException.class)
    public R systemExceptionHandler(SystemException e){
        //打印异常信息
        log.error(&quot;出现了异常！ {}&quot;,e);
        //从异常对象中获取提示信息封装返回
        return R.errorResult(e.getCode(),e.getMsg());
    }


    @ExceptionHandler(Exception.class)
    public R exceptionHandler(Exception e){
        //打印异常信息
        log.error(&quot;出现了异常！ {}&quot;,e);
        //从异常对象中获取提示信息封装返回
        return R.errorResult(AppHttpCodeEnum.SYSTEM_ERROR.getCode(),e.getMessage());
    }
}
</code></pre></div><h3 id="_2-8mybatis自动插入"><a href="#_2-8mybatis自动插入" class="header-anchor">#</a> 2.8mybatis自动插入</h3> <div class="language- extra-class"><pre class="language-text"><code>import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;
import org.apache.ibatis.reflection.MetaObject;
import org.springframework.stereotype.Component;
import xyz.zch1337.utils.SecurityUtils;

import java.util.Date;

// 自动插入
@Component
public class MyMetaObjectHandler implements MetaObjectHandler {
    @Override
    public void insertFill(MetaObject metaObject) {
        Long userId = null;
//        try {
            userId = SecurityUtils.getUserId();
//        } catch (Exception e) {
//            e.printStackTrace();
//            userId = -1L;//表示是自己创建
//        }
        this.setFieldValByName(&quot;createTime&quot;, new Date(), metaObject);
        this.setFieldValByName(&quot;createBy&quot;,userId , metaObject);
        this.setFieldValByName(&quot;updateTime&quot;, new Date(), metaObject);
        this.setFieldValByName(&quot;updateBy&quot;, userId, metaObject);
    }

    @Override
    public void updateFill(MetaObject metaObject) {
        Long userId = null;
        try {
        userId = SecurityUtils.getUserId();
        } catch (Exception e) {
            e.printStackTrace();
            userId = -1L;//表示是自己创建
        }
        this.setFieldValByName(&quot;updateTime&quot;, new Date(), metaObject);
        this.setFieldValByName(&quot; &quot;, userId, metaObject);
    }
}
</code></pre></div><h3 id="_2-9bean拷贝"><a href="#_2-9bean拷贝" class="header-anchor">#</a> 2.9Bean拷贝</h3> <div class="language- extra-class"><pre class="language-text"><code>import org.springframework.beans.BeanUtils;

import java.util.List;
import java.util.stream.Collectors;

public class BeanCopyUtils {

    private BeanCopyUtils() {
    }

    public static &lt;V&gt; V copyBean(Object source,Class&lt;V&gt; clazz) {
        //创建目标对象
        V result = null;
        try {
            result = clazz.newInstance();
            //实现属性copy
            BeanUtils.copyProperties(source, result);
        } catch (Exception e) {
            e.printStackTrace();
        }
        //返回结果
        return result;
    }
    public static &lt;O,V&gt; List&lt;V&gt; copyBeanList(List&lt;O&gt; list, Class&lt;V&gt; clazz){
        return list.stream()
                .map(o -&gt; copyBean(o, clazz))
                .collect(Collectors.toList());
    }
}
</code></pre></div><h3 id="_2-10redisjson序列化"><a href="#_2-10redisjson序列化" class="header-anchor">#</a> 2.10RedisJSON序列化</h3> <div class="language- extra-class"><pre class="language-text"><code>import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.parser.ParserConfig;
import com.alibaba.fastjson.serializer.SerializerFeature;
import com.fasterxml.jackson.databind.JavaType;
import com.fasterxml.jackson.databind.type.TypeFactory;
import org.springframework.data.redis.serializer.RedisSerializer;
import org.springframework.data.redis.serializer.SerializationException;

import java.nio.charset.Charset;

/**
 * Redis使用FastJson序列化
 * 
 * @author sg
 */
public class FastJsonRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt;
{

    public static final Charset DEFAULT_CHARSET = Charset.forName(&quot;UTF-8&quot;);

    private Class&lt;T&gt; clazz;

    static
    {
        ParserConfig.getGlobalInstance().setAutoTypeSupport(true);
    }

    public FastJsonRedisSerializer(Class&lt;T&gt; clazz)
    {
        super();
        this.clazz = clazz;
    }

    @Override
    public byte[] serialize(T t) throws SerializationException
    {
        if (t == null)
        {
            return new byte[0];
        }
        return JSON.toJSONString(t, SerializerFeature.WriteClassName).getBytes(DEFAULT_CHARSET);
    }

    @Override
    public T deserialize(byte[] bytes) throws SerializationException
    {
        if (bytes == null || bytes.length &lt;= 0)
        {
            return null;
        }
        String str = new String(bytes, DEFAULT_CHARSET);

        return JSON.parseObject(str, clazz);
    }


    protected JavaType getJavaType(Class&lt;?&gt; clazz)
    {
        return TypeFactory.defaultInstance().constructType(clazz);
    }
}
</code></pre></div><h3 id="_2-11文件路径生成"><a href="#_2-11文件路径生成" class="header-anchor">#</a> 2.11文件路径生成</h3> <div class="language- extra-class"><pre class="language-text"><code>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.UUID;

public class PathUtils {

    public static String generateFilePath(String fileName){
        //根据日期生成路径   2022/1/15/
        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy/MM/dd/&quot;);
        String datePath = sdf.format(new Date());
        //uuid作为文件名
        String uuid = UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;);
        //后缀和文件后缀一致
        int index = fileName.lastIndexOf(&quot;.&quot;);
        // test.jpg -&gt; .jpg
        String fileType = fileName.substring(index);
        return new StringBuilder().append(datePath).append(uuid).append(fileType).toString();
    }
}
</code></pre></div><h3 id="_2-12securityutils"><a href="#_2-12securityutils" class="header-anchor">#</a> 2.12SecurityUtils</h3> <div class="language- extra-class"><pre class="language-text"><code>import org.springframework.security.core.Authentication;
import org.springframework.security.core.context.SecurityContextHolder;
import xyz.zch1337.domain.entity.LoginUser;

public class SecurityUtils
{

    /**
     * 获取用户
     **/
    public static LoginUser getLoginUser()
    {
        return (LoginUser) getAuthentication().getPrincipal();
    }

    /**
     * 获取Authentication
     */
    public static Authentication getAuthentication() {
        return SecurityContextHolder.getContext().getAuthentication();
    }

    public static Boolean isAdmin(){
        Long id = getLoginUser().getUser().getId();
        return id != null &amp;&amp; id.equals(1L);
    }

    public static Long getUserId() {
        return getLoginUser().getUser().getId();
    }
}
</code></pre></div><h3 id="_2-13webutils"><a href="#_2-13webutils" class="header-anchor">#</a> 2.13WebUtils</h3> <div class="language- extra-class"><pre class="language-text"><code>import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

public class WebUtils
{
    /**
     * 将字符串渲染到客户端
     * 
     * @param response 渲染对象
     * @param string 待渲染的字符串
     * @return null
     */
    public static void renderString(HttpServletResponse response, String string) {
        try
        {
            response.setStatus(200);
            response.setContentType(&quot;application/json&quot;);
            response.setCharacterEncoding(&quot;utf-8&quot;);
            response.getWriter().print(string);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }


    public static void setDownLoadHeader(String filename, HttpServletResponse response) throws UnsupportedEncodingException {
        response.setContentType(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);
        response.setCharacterEncoding(&quot;utf-8&quot;);
        String fname= URLEncoder.encode(filename,&quot;UTF-8&quot;).replaceAll(&quot;\\+&quot;, &quot;%20&quot;);
        response.setHeader(&quot;Content-disposition&quot;,&quot;attachment; filename=&quot;+fname);
    }
}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dd397728.js" defer></script><script src="/assets/js/2.6430ac10.js" defer></script><script src="/assets/js/29.92dc21e8.js" defer></script>
  </body>
</html>
