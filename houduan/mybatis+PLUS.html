<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mybatis | 慢下来~享受当下~</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/assets/img/favicon.ico">
    <meta name="description" content="">
    <meta name="keywords" content="网站关键词">
    <meta name="author" content="zch1337">
    
    <link rel="preload" href="/assets/css/0.styles.7b36eabc.css" as="style"><link rel="preload" href="/assets/js/app.dd397728.js" as="script"><link rel="preload" href="/assets/js/2.6430ac10.js" as="script"><link rel="preload" href="/assets/js/17.a13c3e02.js" as="script"><link rel="prefetch" href="/assets/js/10.de11ce4e.js"><link rel="prefetch" href="/assets/js/11.eb24f3d9.js"><link rel="prefetch" href="/assets/js/12.58efe507.js"><link rel="prefetch" href="/assets/js/13.3d3cb395.js"><link rel="prefetch" href="/assets/js/14.163292db.js"><link rel="prefetch" href="/assets/js/15.0eeb79e2.js"><link rel="prefetch" href="/assets/js/16.0fd3ccda.js"><link rel="prefetch" href="/assets/js/18.e19d705d.js"><link rel="prefetch" href="/assets/js/19.52c11801.js"><link rel="prefetch" href="/assets/js/20.4cfdf5ad.js"><link rel="prefetch" href="/assets/js/21.b6ab34b9.js"><link rel="prefetch" href="/assets/js/22.d6b62e7e.js"><link rel="prefetch" href="/assets/js/23.5bfd3dd2.js"><link rel="prefetch" href="/assets/js/24.8f60b85b.js"><link rel="prefetch" href="/assets/js/25.23e92ce8.js"><link rel="prefetch" href="/assets/js/26.079d4c49.js"><link rel="prefetch" href="/assets/js/27.2a42a3bc.js"><link rel="prefetch" href="/assets/js/28.96e30dd4.js"><link rel="prefetch" href="/assets/js/29.92dc21e8.js"><link rel="prefetch" href="/assets/js/3.7ceae309.js"><link rel="prefetch" href="/assets/js/30.a44ddd87.js"><link rel="prefetch" href="/assets/js/31.ebffffad.js"><link rel="prefetch" href="/assets/js/32.cbeff704.js"><link rel="prefetch" href="/assets/js/33.f34223b0.js"><link rel="prefetch" href="/assets/js/4.3357b40a.js"><link rel="prefetch" href="/assets/js/5.1d0c2d3a.js"><link rel="prefetch" href="/assets/js/6.aeb7dc84.js"><link rel="prefetch" href="/assets/js/7.f2b24add.js"><link rel="prefetch" href="/assets/js/8.b624c3e8.js"><link rel="prefetch" href="/assets/js/9.4891ca45.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b36eabc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/hero.png" alt="慢下来~享受当下~" class="logo"> <span class="site-name can-hide">慢下来~享受当下~</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="英语" class="dropdown-title"><span class="title">英语</span> <span class="arrow down"></span></button> <button type="button" aria-label="英语" class="mobile-dropdown-title"><span class="title">英语</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yingyu/fangfa.html" class="nav-link">
  方法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/sanjianke.html" class="nav-link">
  三剑客
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/vue.html" class="nav-link">
  vue全家桶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          第一阶段-基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/javase.html" class="nav-link">
  javase
</a></li><li class="dropdown-subitem"><a href="/houduan/mysql.html" class="nav-link">
  mysql
</a></li><li class="dropdown-subitem"><a href="/houduan/jdbc.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/houduan/servlet.html" class="nav-link">
  servlet
</a></li></ul></li><li class="dropdown-item"><h4>
          第二阶段-框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/maven.html" class="nav-link">
  maven
</a></li><li class="dropdown-subitem"><a href="/houduan/spring.html" class="nav-link">
  spring
</a></li><li class="dropdown-subitem"><a href="/houduan/springMVC.html" class="nav-link">
  springMVC
</a></li><li class="dropdown-subitem"><a href="/houduan/mybatis+PLUS.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  mybatis+PLUS
</a></li><li class="dropdown-subitem"><a href="/houduan/springboot.html" class="nav-link">
  springboot
</a></li><li class="dropdown-subitem"><a href="/houduan/redis.html" class="nav-link">
  redis
</a></li><li class="dropdown-subitem"><a href="/houduan/springsecurity.html" class="nav-link">
  springsecurity
</a></li></ul></li><li class="dropdown-item"><h4>
          第三阶段-微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/springcloud.html" class="nav-link">
  springcloud
</a></li><li class="dropdown-subitem"><a href="/houduan/springcloudAlibaba.html" class="nav-link">
  springcloudAlibaba
</a></li><li class="dropdown-subitem"><a href="/houduan/rabbitMQ.html" class="nav-link">
  rabbitMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/linux.html" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/docker.html" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高效工具" class="dropdown-title"><span class="title">高效工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="高效工具" class="mobile-dropdown-title"><span class="title">高效工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gaoxiao/vim.html" class="nav-link">
  vim
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目总结" class="dropdown-title"><span class="title">项目总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目总结" class="mobile-dropdown-title"><span class="title">项目总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prosummary/vueS.html" class="nav-link">
  vue项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/javaS.html" class="nav-link">
  java项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/前后端项目开发流程.html" class="nav-link">
  前后端项目搭建
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/后端知识总结.html" class="nav-link">
  后端开发流程
</a></li></ul></div></div><div class="nav-item"><a href="http://www.zch1337.xyz/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于我
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="英语" class="dropdown-title"><span class="title">英语</span> <span class="arrow down"></span></button> <button type="button" aria-label="英语" class="mobile-dropdown-title"><span class="title">英语</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yingyu/fangfa.html" class="nav-link">
  方法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/sanjianke.html" class="nav-link">
  三剑客
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/vue.html" class="nav-link">
  vue全家桶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          第一阶段-基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/javase.html" class="nav-link">
  javase
</a></li><li class="dropdown-subitem"><a href="/houduan/mysql.html" class="nav-link">
  mysql
</a></li><li class="dropdown-subitem"><a href="/houduan/jdbc.html" class="nav-link">
  jdbc
</a></li><li class="dropdown-subitem"><a href="/houduan/servlet.html" class="nav-link">
  servlet
</a></li></ul></li><li class="dropdown-item"><h4>
          第二阶段-框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/maven.html" class="nav-link">
  maven
</a></li><li class="dropdown-subitem"><a href="/houduan/spring.html" class="nav-link">
  spring
</a></li><li class="dropdown-subitem"><a href="/houduan/springMVC.html" class="nav-link">
  springMVC
</a></li><li class="dropdown-subitem"><a href="/houduan/mybatis+PLUS.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  mybatis+PLUS
</a></li><li class="dropdown-subitem"><a href="/houduan/springboot.html" class="nav-link">
  springboot
</a></li><li class="dropdown-subitem"><a href="/houduan/redis.html" class="nav-link">
  redis
</a></li><li class="dropdown-subitem"><a href="/houduan/springsecurity.html" class="nav-link">
  springsecurity
</a></li></ul></li><li class="dropdown-item"><h4>
          第三阶段-微服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/houduan/springcloud.html" class="nav-link">
  springcloud
</a></li><li class="dropdown-subitem"><a href="/houduan/springcloudAlibaba.html" class="nav-link">
  springcloudAlibaba
</a></li><li class="dropdown-subitem"><a href="/houduan/rabbitMQ.html" class="nav-link">
  rabbitMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yunwei/linux.html" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/nginx.html" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/docker.html" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高效工具" class="dropdown-title"><span class="title">高效工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="高效工具" class="mobile-dropdown-title"><span class="title">高效工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gaoxiao/vim.html" class="nav-link">
  vim
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目总结" class="dropdown-title"><span class="title">项目总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目总结" class="mobile-dropdown-title"><span class="title">项目总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prosummary/vueS.html" class="nav-link">
  vue项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/javaS.html" class="nav-link">
  java项目
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/前后端项目开发流程.html" class="nav-link">
  前后端项目搭建
</a></li><li class="dropdown-item"><!----> <a href="/prosummary/后端知识总结.html" class="nav-link">
  后端开发流程
</a></li></ul></div></div><div class="nav-item"><a href="http://www.zch1337.xyz/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于我
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>mybatis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/houduan/mybatis+PLUS.html#框架" class="sidebar-link">框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#常用结构" class="sidebar-link">常用结构</a></li></ul></li><li><a href="/houduan/mybatis+PLUS.html#框架是什么" class="sidebar-link">框架是什么</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#mybatis框架" class="sidebar-link">Mybatis框架</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#mybatis框架-2" class="sidebar-link">Mybatis框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#流程图" class="sidebar-link">流程图</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#项目开发步骤" class="sidebar-link">项目开发步骤</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#mybatis对象分析" class="sidebar-link">Mybatis对象分析</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#优化测试类-teststuentmapper-java" class="sidebar-link">优化测试类:TestStuentMapper.java</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#优化studentmapper-xml文件-为实体类注册别名" class="sidebar-link">优化StudentMapper.xml文件(为实体类注册别名)</a></li></ul></li><li><a href="/houduan/mybatis+PLUS.html#设置日志输出" class="sidebar-link">设置日志输出</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#动态代理" class="sidebar-link">动态代理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#为什么使用动态代理" class="sidebar-link">为什么使用动态代理？</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#动态代理的实现规范" class="sidebar-link">动态代理的实现规范</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#动态代理访问的步骤" class="sidebar-link">动态代理访问的步骤</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#mapper注册优化" class="sidebar-link">mapper注册优化</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#和" class="sidebar-link">#{}和${}</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#返回主键的值" class="sidebar-link">返回主键的值</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#动态sql" class="sidebar-link">动态sql</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#缓存" class="sidebar-link">缓存</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#orm和持久化" class="sidebar-link">ORM和持久化</a></li></ul></li><li><a href="/houduan/mybatis+PLUS.html#_0-启动类中添加-mapperscan-注解" class="sidebar-link">0.启动类中添加 @MapperScan 注解</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#_1-添加依赖" class="sidebar-link">1.添加依赖</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#_2-配置文件" class="sidebar-link">2.配置文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#_3-实体类" class="sidebar-link">3.实体类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#_4-添加mapper接口-继承" class="sidebar-link">4.添加Mapper接口 继承</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#_5-测试mapper接口" class="sidebar-link">5.测试Mapper接口</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/houduan/mybatis+PLUS.html#_6-封装的service层" class="sidebar-link">6.封装的service层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#_1-添加接口" class="sidebar-link">1.添加接口</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#_2-添加接口实现" class="sidebar-link">2.添加接口实现</a></li><li class="sidebar-sub-header"><a href="/houduan/mybatis+PLUS.html#_3-测试接口" class="sidebar-link">3.测试接口</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mybatis"><a href="#mybatis" class="header-anchor">#</a> mybatis</h1> <h2 id="框架"><a href="#框架" class="header-anchor">#</a> 框架</h2> <h3 id="常用结构"><a href="#常用结构" class="header-anchor">#</a> 常用结构</h3> <ol><li>三层架构
<ol><li>界面层
<ul><li>用来接收客户端的输入，调用业务逻辑层进行功能处理，返回结果给客户端。</li></ul></li> <li>业务逻辑层
<ul><li>业务处理，向上为界面层提供处理结果，向下问数据访问层要数据</li></ul></li> <li>数据访问层
<ul><li>进行数据库的增删改查，向上为业务逻辑层提供数据</li></ul></li></ol></li> <li>为什么使用三层结构
<ol><li>结构清晰，耦合度低，各层分工明确</li> <li>可维护性高，可扩展性高</li> <li>有利于标准化</li> <li>开发人员可以只关注于某一层功能实现</li> <li>有利于各层逻辑的复用</li></ol></li> <li>常用的框架SSM
<ol><li>Spring:整合其他框架的框架，核心是IOC和AOP，由20个模块构成</li> <li>SpringMVC：是Spring家族的一员，专门用来优化控制器（Servlet）</li> <li>Mybatis：是持久化层的一个框架，进行数据库访问的优化</li></ol></li></ol> <h2 id="框架是什么"><a href="#框架是什么" class="header-anchor">#</a> 框架是什么</h2> <ul><li>半成品软件，将所以公共的、重复的功能解决掉，高效开发。可复用、可扩展的。</li></ul> <h2 id="mybatis框架"><a href="#mybatis框架" class="header-anchor">#</a> Mybatis框架</h2> <ul><li>apache的一个开源项目iBatis，改为Mybatis</li> <li>完成数据访问层的优化，专注于sql语句，简化JDBC</li></ul> <h2 id="mybatis框架-2"><a href="#mybatis框架-2" class="header-anchor">#</a> Mybatis框架</h2> <h3 id="流程图"><a href="#流程图" class="header-anchor">#</a> 流程图</h3> <ul><li>​	<img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220725131106433.png" alt="image-20220725131106433"></li></ul> <h3 id="项目开发步骤"><a href="#项目开发步骤" class="header-anchor">#</a> 项目开发步骤</h3> <ul><li><p>新建数据库表</p></li> <li><p>新建maven项目，选quickstart模板</p></li> <li><p>修改目录，添加缺少的目录</p></li> <li><p>修改pom.xml文件，添加依赖</p></li> <li><p>修改pom.xml文件，添加资源文件指定</p> <ul><li><div class="language- extra-class"><pre class="language-text"><code>&lt;resources&gt;
  &lt;resource&gt;
    &lt;directory&gt;src/main/java&lt;/directory&gt;
    &lt;includes&gt;
      &lt;include&gt;**/*.xml&lt;/include&gt;
      &lt;include&gt;**/*.properties&lt;/include&gt;
    &lt;/includes&gt;
  &lt;/resource&gt;
  &lt;resource&gt;
    &lt;directory&gt;src/main/resources&lt;/directory&gt;
    &lt;includes&gt;
      &lt;include&gt;**/*.xml&lt;/include&gt;
      &lt;include&gt;**/*.properties&lt;/include&gt;
    &lt;/includes&gt;
  &lt;/resource&gt;
&lt;/resources&gt;
</code></pre></div></li></ul></li> <li><p>在idea中添加数据库可视化</p></li> <li><p>添加jdbc.properties属性文件</p></li> <li><p>添加SQLMapConfig.xml文件</p></li> <li><p>创建实体类Student，封装数据</p></li> <li><p>添加完成学生表增删改查功能的StudentMapper.xml文件</p></li> <li><p>创建测试类，进行功能测试</p></li></ul> <h3 id="mybatis对象分析"><a href="#mybatis对象分析" class="header-anchor">#</a> Mybatis对象分析</h3> <ul><li><p>Resources类：解析SqlMapConfig.xml文件</p> <ul><li><div class="language- extra-class"><pre class="language-text"><code>读取核心配置文件
InputStream in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);
</code></pre></div></li></ul></li> <li><p>SqlSessionFactory接口：</p> <ul><li><p>DefaultSqlSessionFactory是SqlSessionFactory接口的实现类</p> <div class="language- extra-class"><pre class="language-text"><code>创建SQLSessionFactory对象
SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(in);
</code></pre></div></li></ul></li> <li><p>SqlSession接口</p> <ul><li><div class="language- extra-class"><pre class="language-text"><code>获取SqlSession对象
SqlSession sqlSession = sqlSessionFactory.openSession();
完成业务功能
int num = sqlSession.update(&quot;zch.update&quot;, new Student(3, &quot;hehe&quot;, &quot;hehe@111.com&quot;, 18));
提交业务
sqlSession.commit();
关闭
sqlSession.close();
</code></pre></div></li></ul></li></ul> <h3 id="优化测试类-teststuentmapper-java"><a href="#优化测试类-teststuentmapper-java" class="header-anchor">#</a> 优化测试类:TestStuentMapper.java</h3> <ul><li><div class="language- extra-class"><pre class="language-text"><code>package xyz.zch1337.test;/*
 *作者：朱成浩zch1337
 *时间：2022/7/25
 */

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import xyz.zch1337.pojo.Student;

import java.io.IOException;
import java.io.InputStream;

/*
 *作者：朱成浩zch1337
 *时间：2022/7/25
 */
public class TestStuentMapper {
    SqlSession sqlSession;  这个很重要呀
    在所有函数执行之前执行
    @Before
    public void openSqlSession() throws IOException {
        //使用文件流读取核心配置文件SqlMapConfig.xml
        InputStream in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);
        //创建SqlSessionFactory工厂
        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);
        //取出sqlSession对象
        sqlSession = factory.openSession();
    }
	在所有函数执行之后执行
    @After
    public void  closeSqlSession() {
        //关闭sqlSession对象
        sqlSession.close();
    }
    @Test
    public void testGetById() throws IOException {
        //完成查询操作
        Student student = sqlSession.selectOne(&quot;zch.getStudentById&quot;, 1);
        System.out.println(student);
    }
    @Test
    public void testGetByName() throws IOException {
//        完成业务功能
        Student student = sqlSession.selectOne(&quot;zch.getByName&quot;, &quot;李&quot;);
        System.out.println(student);
    }

    @Test
    public void testInsert() throws IOException {
//        完成业务功能
        int num = sqlSession.insert(&quot;zch.insert&quot;, new Student(&quot;朱成浩&quot;, &quot;18282200657@139.com&quot;, 20));
//        切记 在增删改 后必须手工提交事务
        sqlSession.commit();
    }

    @Test
    public void testDelect() throws IOException {
        int num = sqlSession.delete(&quot;zch.delect&quot;, 4);
        System.out.println(num);
//        切记 在增删改 后必须手工提交事务
        sqlSession.commit();
    }

    @Test
    public void testUpdate() throws IOException {
//        完成业务功能
        int num = sqlSession.update(&quot;zch.update&quot;, new Student(3, &quot;hehe&quot;, &quot;hehe@111.com&quot;, 18));
        System.out.println(num);
//        切记 在增删改 后必须手工提交事务
        sqlSession.commit();
    }

}
</code></pre></div></li></ul> <h3 id="优化studentmapper-xml文件-为实体类注册别名"><a href="#优化studentmapper-xml文件-为实体类注册别名" class="header-anchor">#</a> 优化StudentMapper.xml文件(为实体类注册别名)</h3> <ul><li><p>在SqlMapConfig.xml文件中为实体类注册别名</p> <ul><li><div class="language- extra-class"><pre class="language-text"><code>注意顺序
properties之后，environments之前 
</code></pre></div></li></ul></li> <li><p>单个注册 这个不好</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;typeAliases&gt;
	&lt;typeAlias type=&quot;xyz.zch1337.pojo.Student&quot; alias=&quot;student&quot;&gt;&lt;/typeAlias&gt;
&lt;/typeAliases&gt;	
</code></pre></div></li> <li><p>批量注册</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;typeAliases&gt;
    &lt;!--
        批量注册
        别名是类名的驼峰命名法
        Student   -&gt; student
    --&gt;
    &lt;package name=&quot;xyz.zch1337.pojo&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre></div></li></ul> <h2 id="设置日志输出"><a href="#设置日志输出" class="header-anchor">#</a> 设置日志输出</h2> <ul><li><p>在SqlMapConfig.xml文件中设置</p> <div class="language- extra-class"><pre class="language-text"><code>注意顺序
properties之后，environments之前 
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;!--设置日志输出--&gt;
    &lt;settings&gt;
        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
    &lt;/settings&gt;
</code></pre></div></li></ul> <h2 id="动态代理"><a href="#动态代理" class="header-anchor">#</a> 动态代理</h2> <h3 id="为什么使用动态代理"><a href="#为什么使用动态代理" class="header-anchor">#</a> 为什么使用动态代理？</h3> <ul><li>在三层架构中，业务逻辑层要通过接口访问数据访问层的功能，动态代理可以实现</li> <li><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220725142009922.png" alt="image-20220725142009922"></li></ul> <h3 id="动态代理的实现规范"><a href="#动态代理的实现规范" class="header-anchor">#</a> 动态代理的实现规范</h3> <ul><li>UsersMapper.xml文件与UsersMapper.java的接口必须同一个目录下.</li> <li>UsersMapper.xml文件与UsersMapper.java的接口的文件名必须一致,后缀不管.</li> <li>UserMapper.xml文件中标签的id值与与UserMapper.java的接口中方法的名称完全一致.</li> <li>UserMapper.xml文件中标签的parameterType属性值与与UserMapper.java的接口中方法的参数类型完全一致.</li> <li>UserMapper.xml文件中标签的resultType值与与UserMapper.java的接口中方法的返回值类型完全一致.</li> <li>UserMapper.xml文件中namespace属性必须是接口的完全限定名称com.bjpowernode.mapper.UsersMapper</li> <li>在SqlMapConfig.xml文件中注册mapper文件时,使用class=接口的完全限定名称com.bjpowernode.mapper.UsersMapper.</li></ul> <h3 id="动态代理访问的步骤"><a href="#动态代理访问的步骤" class="header-anchor">#</a> 动态代理访问的步骤</h3> <ol><li><p>建表</p></li> <li><p>新建mavengongc</p></li> <li><p>修改目录</p></li> <li><p>修改pom.xml，添加依赖</p></li> <li><p>修改pom.xml文件，添加资源文件指定</p></li> <li><p>添加jdbc.properties属性文件</p></li> <li><p>添加SqlMapConfig.xml文件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
</code></pre></div></li> <li><p>创建实体类Student，封装数据</p></li> <li><p>添加mapper文件夹，新建UsersMapper接口</p></li> <li><p>在mapper文件夹下，新建UserMapper.xml文件，完成动态代理的规范。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
</code></pre></div></li> <li><p>创建测试类，进行功能测试</p></li></ol> <h3 id="mapper注册优化"><a href="#mapper注册优化" class="header-anchor">#</a> mapper注册优化</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;package name=&quot;xyz.zch1337.mapper&quot;/&gt;
</code></pre></div><h3 id="和"><a href="#和" class="header-anchor">#</a> #{}和${}</h3> <ul><li><p>#{} 底层用PS对象，防止sql注册</p></li> <li><p>${} 字符串拼接或字符串替换</p> <ul><li><p>拼接</p> <ul><li><p>一般用于模糊查询  where userName like '%${userName}%'</p></li> <li><p>优化模糊查询</p> <ul><li><strong>where userName like concat('%', #{name}, '%')</strong></li></ul></li></ul></li> <li><p>替换</p> <ul><li><p>需求：模糊地址或用户名查询</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//模糊地址或用户名查询</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Users</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByUserNameOrAddress</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;columnName&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">String</span> columnName<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;columnValue&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">String</span> columnValue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
xml文件中
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getByUserNameOrAddress&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;users&quot;</span><span class="token operator">&gt;</span>
        select id<span class="token punctuation">,</span> username<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> address
        from user
        where $<span class="token punctuation">{</span>columnName<span class="token punctuation">}</span>  like <span class="token function">concat</span><span class="token punctuation">(</span><span class="token char">'%'</span><span class="token punctuation">,</span> #<span class="token punctuation">{</span>columnValue<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token char">'%'</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre></div></li></ul></li></ul></li></ul> <h3 id="返回主键的值"><a href="#返回主键的值" class="header-anchor">#</a> 返回主键的值</h3> <ul><li><p>在插入语句结束后，返回自增的主键值到入参的users对象的id属性中</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insert<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>users<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            select last_insert_id()
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
        insert into user(username, birthday, sex, address)
        values (#{userName}, #{birthday}, #{sex}, #{address})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>UUID的用法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UUID</span> uuid <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>uuid<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;selectKey keyProperty=&quot;orderid&quot; order=&quot;BEFORE&quot; resultType=&quot;string&quot;&gt;
            select uuid();
&lt;/selectKey&gt;

</code></pre></div></li></ul> <h3 id="动态sql"><a href="#动态sql" class="header-anchor">#</a> 动态sql</h3> <p>可以定义代码片段，可以进行逻辑判断，可以进行循环片段,使条件判断更为简单</p> <ol><li><p><sql>:定义代码片段</sql></p></li> <li><p><include>:引用</include></p> <ul><li><div class="language- extra-class"><pre class="language-text"><code>&lt;sql id=&quot;allColumns&quot;&gt;
        id, username, birthday, sex, address
&lt;/sql&gt;
select &lt;include refid=&quot;allColumns&quot;&gt;&lt;/include&gt;
</code></pre></div></li></ul></li> <li><if></if></li> <li><p><where>:多条件拼接，在查询，删除，更新中用</where></p> <ul><li><p>业务需求：按指定的条件进行多条件查询</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;select id=&quot;getByCondition&quot; parameterType=&quot;users&quot; resultType=&quot;users&quot;&gt;
        select &lt;include refid=&quot;allColumns&quot;&gt;&lt;/include&gt;
        from user
        &lt;where&gt;
            &lt;if test=&quot;userName != null and userName != ''&quot;&gt; //写传过来的值
                and username like concat('%', #{userName}, '%')
            &lt;/if&gt;
            &lt;if test=&quot;birthday != null&quot;&gt;
                and birthday = #{birthday}
            &lt;/if&gt;
            &lt;if test=&quot;sex != null and sex != ''&quot;&gt;
                and sex = #{sex}
            &lt;/if&gt;
            &lt;if test=&quot;address != null and address != ''&quot;&gt;
                and address like concat('%', #{address}, '%')
            &lt;/if&gt;
        &lt;/where&gt;
&lt;/select&gt;
</code></pre></div></li></ul></li> <li><p><set>:有选择的进行更新处理，至少更新一列</set></p> <ul><li><p>业务需求:有选择的更新</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;update id=&quot;updateBySet&quot; parameterType=&quot;users&quot;&gt;
        update user
        &lt;set&gt;
            &lt;if test=&quot;userName != null and userName != ''&quot;&gt;
                username = #{userName},
            &lt;/if&gt;
            &lt;if test=&quot;birthday != null&quot;&gt;
                birthday = #{birthday},
            &lt;/if&gt;
            &lt;if test=&quot;sex != null and sex != ''&quot;&gt;
                sex = #{sex},
            &lt;/if&gt;
            &lt;if test=&quot;address != null and address != ''&quot;&gt;
                address = #{address},
            &lt;/if&gt;
        &lt;/set&gt;
        where id = #{id}
    &lt;/update&gt;
</code></pre></div></li></ul></li> <li><p><foreach>:用来循环遍历   id in（1,2,3)</foreach></p> <ul><li><p>业务需求：查询多个指定id的用户信息</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;select id=&quot;getByIds&quot; resultType=&quot;users&quot;&gt;
        select &lt;include refid=&quot;allColumns&quot;&gt;&lt;/include&gt;
        from user
        where id in
            &lt;foreach collection=&quot;array&quot; item=&quot;id&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;
                #{id}
            &lt;/foreach&gt;
&lt;/select&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>参数详解:
    collection:表示接口中的方法参数的类型， 如果是数组使用array , 如果是list集合使用list
    item:自定义的，表示数组和集合成员的变量
    open:循环开始是的字符
    close:循环结束时的字符
    separator:集合成员之间的分隔符
</code></pre></div></li> <li><p>批量删除用户</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;delete id=&quot;deleteBatch&quot;&gt;
        delete
        from user
        where id in
            &lt;foreach collection=&quot;array&quot; item=&quot;id&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;
                #{id}
            &lt;/foreach&gt;
&lt;/delete&gt;
</code></pre></div></li> <li><p>批量更新用户</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;update id=&quot;updateBatch&quot;&gt;
        &lt;foreach collection=&quot;list&quot; item=&quot;users&quot; separator=&quot;;&quot;&gt;
            update user
            &lt;set&gt;
                &lt;if test=&quot;users.userName != null and users.userName != ''&quot;&gt;
                    username = #{users.userName},
                &lt;/if&gt;
                &lt;if test=&quot;users.birthday != null&quot;&gt;
                    birthday = #{users.birthday},
                &lt;/if&gt;
                &lt;if test=&quot;users.sex != null and users.sex != ''&quot;&gt;
                    sex = #{users.sex},
                &lt;/if&gt;
                &lt;if test=&quot;users.address != null and users.address != ''&quot;&gt;
                    address = #{users.address},
                &lt;/if&gt;
            &lt;/set&gt;
            where id = #{users.id}
        &lt;/foreach&gt;
&lt;/update&gt;

注意注意：
批量更新要在url中添加参数：&amp;allowMultiQueries=true
允许多条语句同时执行
</code></pre></div></li> <li><p>批量添加</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--  int insertActivityByList(List&lt;Activity&gt; activityList);--&gt;
  &lt;insert id=&quot;insertActivityByList&quot;&gt;
    insert into tbl_activity(id, owner, name, start_date, end_date, cost, description, create_time, create_by)
    values
    &lt;foreach collection=&quot;list&quot; item=&quot;obj&quot; separator=&quot;,&quot;&gt;
      (#{obj.id}, #{obj.owner}, #{obj.name}, #{obj.startDate}, #{obj.endDate}, #{obj.cost}, #{obj.description},
      #{obj.createTime}, #{obj.createBy})
    &lt;/foreach&gt;
  &lt;/insert&gt;
</code></pre></div></li></ul></li> <li><p>指定参数位置</p> <p>如果入参是多个，可以通过指定参数进行传参，是实体包含不住的条件，如果某个成员变量要有区间范围内的判断，或者有俩个值进行处理，实体类实现不了</p> <p>eg：查询指定日期范围内的用户</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;select id=&quot;getByBirhday&quot; resultType=&quot;users&quot;&gt;
        select &lt;include refid=&quot;allColumns&quot;&gt;&lt;/include&gt;
        from user
        where birthday between #{arg0} and #{arg1}
&lt;/select&gt;
arg0 arg1是传入参数的下标
</code></pre></div></li> <li><p>入参是map(重点)</p> <p>如果入参超过一个以上，使用map封装查询条件</p> <div class="language- extra-class"><pre class="language-text"><code> #{birthdayBegin}  是map中的key

&lt;select id=&quot;getByMap&quot; resultType=&quot;users&quot;&gt;
        select &lt;include refid=&quot;allColumns&quot;&gt;&lt;/include&gt;
        from user
        where birthday between #{birthdayBegin} and #{birthdayEnd}
&lt;/select&gt;

测试
@Test
    public void testGetByMap() throws ParseException {
        Date begin = sf.parse(&quot;1999-02-22&quot;);
        Date end = sf.parse(&quot;2001-03-10&quot;);
        Map map = new HashMap&lt;&gt;();
        map.put(&quot;birthdayBegin&quot;, begin);
        map.put(&quot;birthdayEnd&quot;, end);
        List&lt;Users&gt; usersList = usersMapper.getByMap(map);
        usersList.forEach(users -&gt; System.out.println(users));
    }
</code></pre></div></li> <li><p>返回值是一行的map</p> <p>多表查询时，无法用一个实体类封装数据</p> <div class="language- extra-class"><pre class="language-text"><code>//返回值是一行map
Map getReturnMap(Integer id);

&lt;select id=&quot;getReturnMap&quot; parameterType=&quot;int&quot; resultType=&quot;map&quot;&gt;
        select username, address
        from user
        where id = #{id}
&lt;/select&gt;

测试
	@Test
    public void testGetReturnMap() {
        Map map = usersMapper.getReturnMap(18);
        System.out.println(map.get(&quot;username&quot;));
        System.out.println(map.get(&quot;address&quot;));
    }
结果
{address=四川, username=朱成浩2}
</code></pre></div></li> <li><p>返回值是多行的map</p> <div class="language- extra-class"><pre class="language-text"><code>//返回多行的map
List&lt;Map&gt; getMulMap();
&lt;select id=&quot;getMulMap&quot; resultType=&quot;map&quot;&gt;
        select username, address
        from user
&lt;/select&gt;
测试
	@Test
    public void testGetMulMap() {
        List&lt;Map&gt; mapList = usersMapper.getMulMap();
        mapList.forEach(map -&gt; {
            System.out.println(map);
        });
    }
</code></pre></div></li> <li><p>解决实体类与数据库列名不一致问题</p> <ul><li><p>方法1:别名</p> <div class="language- extra-class"><pre class="language-text"><code>	&lt;select id=&quot;getBooksMap&quot; resultType=&quot;map&quot;&gt;
        select bookid id, bookname name
        from book
    &lt;/select&gt;
</code></pre></div></li> <li><p>方法二:resultMap映射</p> <div class="language- extra-class"><pre class="language-text"><code>    &lt;resultMap id=&quot;bookmap&quot; type=&quot;map&quot;&gt;
        &lt;id property=&quot;id&quot; column=&quot;bookid&quot;&gt;&lt;/id&gt;
        &lt;result property=&quot;name&quot; column=&quot;bookname&quot;&gt;&lt;/result&gt;
    &lt;/resultMap&gt;
    &lt;select id=&quot;getBooksMap2&quot; resultMap=&quot;bookmap&quot;&gt;
        select bookid, bookname
        from book
    &lt;/select&gt;
</code></pre></div></li></ul></li> <li><p>多表查询</p> <ol><li><p>一对多</p> <p>客户对订单就是一对多</p> <p>业务需求：查询客户信息并查询名下所有订单 站在查询客户角度</p> <div class="language- extra-class"><pre class="language-text"><code>Customer实体类的成员
    private Integer id;
    private String name;
    private Integer age;
    private List&lt;Orders&gt; ordersList;
CustomerMapper.xml中配置
    &lt;resultMap id=&quot;customermap&quot; type=&quot;customer&quot;&gt;
        &lt;id property=&quot;id&quot; column=&quot;cid&quot;&gt;&lt;/id&gt;
        &lt;result property=&quot;name&quot; column=&quot;name&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;
        &lt;collection property=&quot;ordersList&quot; ofType=&quot;orders&quot;&gt;
            &lt;id property=&quot;id&quot; column=&quot;oid&quot;&gt;&lt;/id&gt;
            &lt;result property=&quot;orderNumber&quot; column=&quot;orderNumber&quot;&gt;&lt;/result&gt;
            &lt;result property=&quot;orderPrice&quot; column=&quot;orderPrice&quot;&gt;&lt;/result&gt;
            &lt;result property=&quot;customer_id&quot; column=&quot;customer_id&quot;&gt;&lt;/result&gt;
        &lt;/collection&gt;
    &lt;/resultMap&gt;
    &lt;select id=&quot;getById&quot; parameterType=&quot;int&quot; resultMap=&quot;customermap&quot;&gt;
        select c.id cid, name, age, o.id oid, orderNumber, orderPrice, customer_id
        from customer c left join orders o on c.id = o.customer_id
        where c.id = #{id}
    &lt;/select&gt;
</code></pre></div></li> <li><p>多对一</p> <p>订单对客户就是多对一</p> <p>业务需求：查询某个订单并查询对应的客户信息 站在查询某个订单角度</p> <div class="language- extra-class"><pre class="language-text"><code>    &lt;resultMap id=&quot;ordersmap&quot; type=&quot;orders&quot;&gt;
        &lt;id property=&quot;id&quot; column=&quot;oid&quot;&gt;&lt;/id&gt;
        &lt;result property=&quot;orderNumber&quot; column=&quot;orderNumber&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;orderPrice&quot; column=&quot;orderPrice&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;customer_id&quot; column=&quot;customer_id&quot;&gt;&lt;/result&gt;
        &lt;association property=&quot;customer&quot; javaType=&quot;customer&quot;&gt;
            &lt;id property=&quot;id&quot; column=&quot;cid&quot;&gt;&lt;/id&gt;
            &lt;result property=&quot;name&quot; column=&quot;name&quot;&gt;&lt;/result&gt;
            &lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;
        &lt;/association&gt;
    &lt;/resultMap&gt;
    &lt;select id=&quot;getById&quot; parameterType=&quot;int&quot; resultMap=&quot;ordersmap&quot;&gt;
        select o.id oid, orderNumber, orderPrice, customer_id, c.id cid, name, age
        from orders o inner join customer c on o.customer_id = c.id
        where o.id = #{id}
    &lt;/select&gt;
    注意：
    &lt;association property=&quot;customer&quot; javaType=&quot;customer&quot;
</code></pre></div></li> <li><p>多对多</p></li> <li><p>总结</p> <p>无论是什么关联关系，如果某方持有另一方的集合，使用<collection>标签完成映射，如果某方持有另一方的对象，使用<association>标签完成映射</association></collection></p> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220728210141351.png" alt="image-20220728210141351"></p></li></ol></li></ol> <p>​</p> <h3 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h3> <ul><li><p>设置事务:在SqlMapConfig.xml文件中<transactionManager type="JDBC"></transactionManager></p></li> <li><p>提交事务:</p> <div class="language- extra-class"><pre class="language-text"><code>sqlSession = sqlSessionFactory.openSession();
默认为 false，手动提交事务  sqlSession.commit();
true 为自动提交
</code></pre></div></li></ul> <h3 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h3> <p>Mybatis提供缓存，一级缓存和二级缓存，默认开启一级缓存。目的是提高查询效率。</p> <p>使用缓存后，查询的流程:</p> <p>查询时先到缓存里查，如果没有则查询数据库，放缓存一份，在返回客户端，下次查询时直接从缓存中返回。如果数据库发生改变(commit操作)，则清空缓存。</p> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220730111424401.png" alt="image-20220730111424401"></p> <ul><li>一级缓存使用的是SqlSession的作用域，同一个sqlSession共享一级缓存的数据。</li> <li>二级缓存使用的是mapper的作用域，不同的sqlSession只要访问同一个mapper.xml文件，则共享二级缓存作用域。</li></ul> <h3 id="orm和持久化"><a href="#orm和持久化" class="header-anchor">#</a> ORM和持久化</h3> <p>什么是ORM？</p> <p>Object Relation Mapping：对象关系映射</p> <p>java语言中以对象的方式操作数据，存在数据库中是以表的方式进行存储，对象中的成员变量与表中的列之间的数据互换称为映射，整套操作就是ORM</p> <p>什么是持久化的操作？</p> <p>java内存的数据对象形式存到关系数据库的表中，将数据库的数据读取出来以封装，数据的来来回回就是持久化的操作。</p> <h1 id="mybatisplus"><a href="#mybatisplus" class="header-anchor">#</a> mybatisPLUS</h1> <h2 id="_0-启动类中添加-mapperscan-注解"><a href="#_0-启动类中添加-mapperscan-注解" class="header-anchor">#</a> 0.启动类中添加 <code>@MapperScan</code> 注解</h2> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122200224110.png" alt="image-20221122200224110"></p> <h2 id="_1-添加依赖"><a href="#_1-添加依赖" class="header-anchor">#</a> 1.添加依赖</h2> <div class="language- extra-class"><pre class="language-text"><code>        &lt;dependency&gt;
            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.4.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;8.0.23&lt;/version&gt;
        &lt;/dependency&gt;

</code></pre></div><h2 id="_2-配置文件"><a href="#_2-配置文件" class="header-anchor">#</a> 2.配置文件</h2> <div class="language- extra-class"><pre class="language-text"><code>mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl # 查看日志
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/guigu-auth?characterEncoding=utf-8&amp;useSSL=false
    username: root
    password: zch123456
</code></pre></div><h2 id="_3-实体类"><a href="#_3-实体类" class="header-anchor">#</a> 3.实体类</h2> <div class="language- extra-class"><pre class="language-text"><code>1.BaseEntity
package xyz.zch1337.demo01.model.base;

import com.baomidou.mybatisplus.annotation.TableField;
import com.baomidou.mybatisplus.annotation.TableLogic;
import lombok.Data;

import java.io.Serializable;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

@Data
public class BaseEntity implements Serializable {

    //@TableId(type = IdType.AUTO)
    private String id;

    @TableField(&quot;create_time&quot;)
    private Date createTime;

    @TableField(&quot;update_time&quot;)
    private Date updateTime;

    @TableLogic  //逻辑删除 默认效果 0 没有删除 1 已经删除
    @TableField(&quot;is_deleted&quot;)
    private Integer isDeleted;

    @TableField(exist = false)
    private Map&lt;String,Object&gt; param = new HashMap&lt;&gt;();
}

</code></pre></div><p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122195146690.png" alt="image-20221122195146690"></p> <div class="language- extra-class"><pre class="language-text"><code>2.SysRole类继承base类
package xyz.zch1337.demo01.model.system;

import com.baomidou.mybatisplus.annotation.TableField;
import com.baomidou.mybatisplus.annotation.TableName;
import lombok.Data;
import xyz.zch1337.demo01.model.base.BaseEntity;
@Data
@TableName(&quot;sys_role&quot;)
public class SysRole extends BaseEntity {

	private static final long serialVersionUID = 1L;

	@TableField(&quot;role_name&quot;)
	private String roleName;

	@TableField(&quot;role_code&quot;)
	private String roleCode;

	@TableField(&quot;description&quot;)
	private String description;

}
</code></pre></div><p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122195201349.png" alt="image-20221122195201349"></p> <h2 id="_4-添加mapper接口-继承"><a href="#_4-添加mapper接口-继承" class="header-anchor">#</a> 4.添加Mapper接口 继承</h2> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122195419697.png" alt="image-20221122195419697"></p> <h2 id="_5-测试mapper接口"><a href="#_5-测试mapper接口" class="header-anchor">#</a> 5.测试Mapper接口</h2> <p>使用条件构造器</p> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122200302698.png" alt="image-20221122200302698"></p> <h2 id="_6-封装的service层"><a href="#_6-封装的service层" class="header-anchor">#</a> 6.封装的service层</h2> <h3 id="_1-添加接口"><a href="#_1-添加接口" class="header-anchor">#</a> 1.添加接口</h3> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122200758393.png" alt="image-20221122200758393"></p> <div class="language- extra-class"><pre class="language-text"><code>public interface SysRoleService extends IService&lt;SysRole&gt; {
}
</code></pre></div><h3 id="_2-添加接口实现"><a href="#_2-添加接口实现" class="header-anchor">#</a> 2.添加接口实现</h3> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122200904931.png" alt="image-20221122200904931"></p> <div class="language- extra-class"><pre class="language-text"><code>@Transactional
@Service
public class SysRoleServiceImpl extends ServiceImpl&lt;SysRoleMapper, SysRole&gt; implements SysRoleService {
}
</code></pre></div><h3 id="_3-测试接口"><a href="#_3-测试接口" class="header-anchor">#</a> 3.测试接口</h3> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221122202206281.png" alt="image-20221122202206281"></p> <div class="language- extra-class"><pre><code>@Autowired
private SysRoleService sysRoleService;
@Test
void test() {
    //使用条件构造器
    LambdaQueryWrapper&lt;SysRole&gt; queryWrapper = new LambdaQueryWrapper&lt;&gt;();
    queryWrapper.eq(SysRole::getRoleName,&quot;系统管理员&quot;);
    List&lt;SysRole&gt; list = sysRoleService.list(queryWrapper);
    System.out.println(list);
}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dd397728.js" defer></script><script src="/assets/js/2.6430ac10.js" defer></script><script src="/assets/js/17.a13c3e02.js" defer></script>
  </body>
</html>
